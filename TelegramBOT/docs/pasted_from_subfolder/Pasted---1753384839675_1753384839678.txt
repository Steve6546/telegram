### **ููู ูุชุทูุจุงุชู:**
ุจูุงุกู ุนูู ูุง ุฐูุฑุชูุ ูุจุฏู ุฃูู ุชุฑุบุจ ูู ุชุญุฏูุซ ุงููุดุฑูุน ุจุญูุซ ูููู ุงูุจูุช ูุงุฏุฑูุง ุนูู:
1. **ุงูุชูุงุตู ูุน ุงููุณุชุฎุฏู** ุจุดูู ุฃูุซุฑ ุชูุงุนููุฉ.
2. **ุนุฑุถ ูุงุฆูุฉ ุงูุฎูุงุฑุงุช** ูููุณุชุฎุฏู (ูุซู ุงูุฌูุฏุฉุ ุงูุตูุบุฉุ ููุน ุงูููู).
3. **ุงูุณูุงุญ ูููุณุชุฎุฏู ุจุงุฎุชูุงุฑ** ูู ุฎูุงู ุงูุฑุฏ ุนูู ุงูุชุนูููุงุช ุงูุชู ูุฑุณููุง ุงูุจูุช.
4. **ุชูููุฐ ุงูุชูุฒูู ุจูุงุกู ุนูู ุงูุงุฎุชูุงุฑุงุช** ุงูุชู ูุฎุชุงุฑูุง ุงููุณุชุฎุฏู.
5. **ุฅุถุงูุฉ ููุณุฉ ุฅูุณุงููุฉ ููุฑุชุจุฉ** ูู ุงูุฑุฏูุฏ ุจุงุณุชุฎุฏุงู ุงูุฐูุงุก ุงูุงุตุทูุงุนู.

### **ุฎุทุฉ ุงูุชูููุฐ:**

#### **1. ุชุนุฏูู ุณููู ุงูุจูุช ูุชูุฏูู ูุงุฆูุฉ ุฎูุงุฑุงุช:**
ุนูุฏ ุชููู ุทูุจ ุชูุฒูู ุงูููุฏููุ ุณูุชู ุนุฑุถ ูุงุฆูุฉ ุจุงูุฎูุงุฑุงุช ุงููุชุงุญุฉ ูููุณุชุฎุฏู (ูุซู ุฌูุฏุฉ ุงูููุฏููุ ุงูุตูุบุฉุ ุฅูุฎ). ูููู ุงุณุชุฎุฏุงู ููุชุจุฉ `pyTelegramBotAPI` ูุฅุฑุณุงู ุฑุณุงุฆู ุชุญุชูู ุนูู ุฒุฑ ุฃู ูุงุฆูุฉ ุงุฎุชูุงุฑูุฉ.

#### **2. ุงุณุชุฎุฏุงู ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูุชุญููู ุงูุทูุจุงุช:**
ุณูุชู ุงุณุชุฎุฏุงู ุงูุฐูุงุก ุงูุงุตุทูุงุนู (OpenRouter) ูุชูุฌูู ุงููุณุชุฎุฏู ูุฅุนุทุงุฆู ุฑุฏูุฏ ูุฑุชุจุฉ ููููุฏุฉ. ุงูุชุนูููุงุช ุงูุฌุฏูุฏุฉ ุณุชููู ุฃูุซุฑ ุชูุตููุงู ููุชุฃูุฏ ูู ุฃู ุงูุฐูุงุก ุงูุงุตุทูุงุนู ููุฏู ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุณูุณุฉ.

#### **3. ุชูููุฐ ุงูุชูุฒูู ุจูุงุกู ุนูู ุงูุงุฎุชูุงุฑุงุช:**
ุจุนุฏ ุงุฎุชูุงุฑ ุงููุณุชุฎุฏูุ ุณูุชู ุงุณุชุฎุฏุงู ููุชุจุฉ `yt-dlp` ูุชูุฒูู ุงูููู ุจูุงุกู ุนูู ุงูุฎูุงุฑุงุช ุงููุญุฏุฏุฉ (ุฌูุฏุฉุ ุตูุบุฉุ ุฅูุฎ).

---

### **Script ูุชุญุฏูุซ ุงููุดุฑูุน:**

#### **ุงููุณุชูุฏ ุงูุฃุณุงุณู (`main.py`):**
```python
import os
import json
from pyrogram import Client, filters
from yt_dlp_wrapper import get_video_info, download_media
from ai_utils import analyze_user_request, generate_options_message

# ูุฑุงุกุฉ ุงูุชููู ูู ููู config.json
with open('config.json', 'r') as f:
    config = json.load(f)
BOT_TOKEN = config['bot_token']

# ุฅูุดุงุก ูุงุฆู ุงูุจูุช
app = Client("my_bot", bot_token=BOT_TOKEN)

# ุฏุงูุฉ ูุจุฏุก ุนูููุฉ ุงูุชูุฒูู
def start_download(user_id, video_url, options):
    try:
        # ุชูุฒูู ุงููุณุงุฆุท ุจุงุณุชุฎุฏุงู yt-dlp
        file_path = download_media(video_url, options)
        app.send_document(user_id, document=file_path)
        os.remove(file_path)  # ุญุฐู ุงูููู ุจุนุฏ ุงูุฅุฑุณุงู
    except Exception as e:
        app.send_message(user_id, f"ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงูุชูุฒูู: {str(e)}")

# ููุชุฑ ููุนุงูุฌุฉ ุงูุฑุณุงุฆู
@app.on_message(filters.command(["start"]))
async def start_command(client, message):
    await message.reply_text("ูุฑุญุจูุง! ุฃูุง ุจูุช ุงูุชูุฒูู ุงูุฐูู. ููููู ุฅุฑุณุงู ุฑุงุจุท ุงูููุฏูู ุงูุฐู ุชุฑูุฏ ุชูุฒููู.")

@app.on_message(filters.text & ~filters.command(["start"]))
async def handle_message(client, message):
    user_id = message.chat.id
    text = message.text

    # ุชุญููู ุงูุทูุจ ุจุงุณุชุฎุฏุงู ุงูุฐูุงุก ุงูุงุตุทูุงุนู
    analysis_result = analyze_user_request(text)
    
    if "url" in analysis_result:
        video_url = analysis_result["url"]
        
        # ุงูุญุตูู ุนูู ูุนูููุงุช ุงูููุฏูู
        video_info = get_video_info(video_url)
        
        # ุฅูุดุงุก ุฑุณุงูุฉ ุงูุฎูุงุฑุงุช
        options_message = generate_options_message(video_info)
        await message.reply(options_message)
        
        # ุงูุชุธุงุฑ ุฑุฏ ุงููุณุชุฎุฏู ูุงุฎุชูุงุฑ ุงูุฎูุงุฑ
        @app.on_message(filters.text & filters.chat(user_id))
        async def handle_option_choice(client, choice_message):
            selected_option = choice_message.text
            
            # ุชุญููู ุงูุฎูุงุฑ ุงููุญุฏุฏ
            if selected_option.lower() == "1":
                options = {"format": "bestvideo[ext=mp4]+bestaudio[ext=m4a]/best[ext=mp4]"}
            elif selected_option.lower() == "2":
                options = {"format": "bestaudio[ext=m4a]"}
            else:
                await choice_message.reply_text("ุฎูุงุฑ ุบูุฑ ุตุญูุญ. ูุฑุฌู ุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู.")
                return
            
            # ุจุฏุก ุงูุชูุฒูู ุจูุงุกู ุนูู ุงูุฎูุงุฑ ุงููุญุฏุฏ
            start_download(user_id, video_url, options)
            
            # ุฅุฒุงูุฉ ุงูููุชุฑ ุงููุคูุช
            app.remove_handler(handle_option_choice)
    else:
        await message.reply_text("ุนุฐุฑูุงุ ูู ุฃุชููู ูู ููู ุทูุจู. ูุฑุฌู ุชุฃููุฏ ุงูุฑุงุจุท ุฃู ุฅุนุงุฏุฉ ูุชุงุจุฉ ุทูุจู.")

# ุชุดุบูู ุงูุจูุช
if __name__ == "__main__":
    app.run()
```

---

#### **ููู ุงููุณุงุนุฏุฉ ูู `yt-dlp` (`yt_dlp_wrapper.py`):**
```python
import yt_dlp

def get_video_info(url):
    ydl_opts = {
        'quiet': True,
        'no_warnings': True,
        'extract_flat': True,
        'playlist_items': '1',
        'simulate': True,
        'force_generic_extractor': True,
    }
    
    with yt_dlp.YoutubeDL(ydl_opts) as ydl:
        info = ydl.extract_info(url, download=False)
        return {
            "title": info.get("title"),
            "duration": info.get("duration"),
            "views": info.get("view_count"),
            "formats": [f for f in info.get("formats", [])]
        }

def download_media(url, options):
    ydl_opts = {
        'outtmpl': '%(id)s.%(ext)s',
        **options
    }
    
    with yt_dlp.YoutubeDL(ydl_opts) as ydl:
        info = ydl.extract_info(url, download=True)
        return ydl.prepare_filename(info)
```

---

#### **ููู ุงูุฐูุงุก ุงูุงุตุทูุงุนู (`ai_utils.py`):**
```python
import requests
import os

def analyze_user_request(user_input):
    # ุงุณุชุฏุนุงุก ุงูุฐูุงุก ุงูุงุตุทูุงุนู (OpenRouter) ูุชุญููู ุงูุทูุจ
    api_key = os.getenv("OPENROUTER_API_KEY")
    headers = {
        "Authorization": f"Bearer {api_key}",
        "Content-Type": "application/json"
    }
    payload = {
        "model": "qwen-3",
        "prompt": f"analyze this user request and extract the URL: {user_input}",
        "max_tokens": 200
    }
    
    response = requests.post("https://openrouter.ai/api/v1/chat/completions", headers=headers, json=payload)
    result = response.json()
    
    # ุชุญููู ุงูุฑุฏูุฏ
    if "choices" in result:
        extracted_url = result["choices"][0]["message"]["content"]
        return {"url": extracted_url}
    else:
        return {}

def generate_options_message(video_info):
    title = video_info.get("title", "ุบูุฑ ูุนุฑูู")
    duration = video_info.get("duration", "ุบูุฑ ูุนุฑูู")
    views = video_info.get("views", "ุบูุฑ ูุนุฑูู")
    
    options_message = f"""
๐ฅ **ูุนูููุงุช ุงูููุฏูู:**
- ุงูุนููุงู: {title}
- ุงููุฏุฉ: {duration} ุซุงููุฉ
- ุงููุดุงูุฏุงุช: {views}

เนเธเธฃเธ ุงุฎุชุฑ ุฎูุงุฑ ุงูุชูุฒูู:
1. ุชูุฒูู ุงูููุฏูู ุจุฌูุฏุฉ ุนุงููุฉ (MP4)
2. ุงุณุชุฎุฑุงุฌ ุงูุตูุช ููุท (MP3)

ูุฑุฌู ุฅุฏุฎุงู ุฑูู ุงูุฎูุงุฑ ุงููุฑุบูุจ: ๐
"""
    return options_message
```

---

#### **ูููุงุช ุงูุฏุนู ุงูุฃุฎุฑู:**
1. **`.env`:**
   ```plaintext
   OPENROUTER_API_KEY=your_openrouter_api_key_here
   ```

2. **`config.json`:**
   ```json
   {
       "bot_token": "your_telegram_bot_token_here"
   }
   ```

3. **`requirements.txt`:**
   ```plaintext
   pyrogram
   yt-dlp
   requests
   ```

---

### **ููู ูุนูู ุงููุดุฑูุน ุงูุขู:**

1. **ุนูุฏ ุจุฏุก ุงูุจูุช:**
   - ุณูุจุฏุฃ ุงูุจูุช ูู ุงูุงุณุชูุงุน ุฅูู ุงูุฑุณุงุฆู ุงููุงุฑุฏุฉ.

2. **ุนูุฏ ุชููู ุฑุงุจุท ููุฏูู:**
   - ุงูุจูุช ุณูููู ุจุชูุฏูู ูุงุฆูุฉ ุฎูุงุฑุงุช ูููุณุชุฎุฏู (ูุซู ุชูุฒูู ุงูููุฏูู ุฃู ุงุณุชุฎุฑุงุฌ ุงูุตูุช).
   - ุงููุณุชุฎุฏู ุณูุฎุชุงุฑ ุงูุฎูุงุฑ ุงูููุงุณุจ ุนู ุทุฑูู ุฅุฑุณุงู ุงูุฑูู ุงูููุงุจู.

3. **ุจุนุฏ ุงุฎุชูุงุฑ ุงูุฎูุงุฑ:**
   - ุงูุจูุช ุณูุณุชุฎุฏู `yt-dlp` ูุชูุฒูู ุงูููู ุจูุงุกู ุนูู ุงูุงุฎุชูุงุฑ.
   - ุณูุชู ุฅุฑุณุงู ุงูููู ุฅูู ุงููุณุชุฎุฏู.

4. **ูู ุญุงู ุญุฏูุซ ุฎุทุฃ:**
   - ุงูุจูุช ุณูููู ุจุฅุนูุงู ุงููุณุชุฎุฏู ุจุงูุฎุทุฃ ุจุทุฑููุฉ ูุงุถุญุฉ.

---

### **ูุซุงู ุนูู ุงูุชูุงุนู:**

#### **ูู ุงููุณุชุฎุฏู:**
```
ุชุญููู ูุฐุง ุงูููุฏูู: https://www.youtube.com/watch?v=dQw4w9WgXcQ
```

#### **ุฑุฏ ุงูุจูุช:**
```
๐ฅ **ูุนูููุงุช ุงูููุฏูู:**
- ุงูุนููุงู: Rick Astley - Never Gonna Give You Up (Video)
- ุงููุฏุฉ: 3 minutes and 32 seconds
- ุงููุดุงูุฏุงุช: 1,234,567,890

เนเธเธฃเธ ุงุฎุชุฑ ุฎูุงุฑ ุงูุชูุฒูู:
1. ุชูุฒูู ุงูููุฏูู ุจุฌูุฏุฉ ุนุงููุฉ (MP4)
2. ุงุณุชุฎุฑุงุฌ ุงูุตูุช ููุท (MP3)

ูุฑุฌู ุฅุฏุฎุงู ุฑูู ุงูุฎูุงุฑ ุงููุฑุบูุจ: ๐
```

#### **ุงุฎุชูุงุฑ ุงููุณุชุฎุฏู:**
```
1
```

#### **ุฑุฏ ุงูุจูุช:**
```
ุฌุงุฑู ุชูุฒูู ุงูููุฏูู... ๐
```

#### **ุจุนุฏ ุงูุชูุฒูู:**
- ุงูุจูุช ุณูููู ุจุฅุฑุณุงู ุงูููู ุฅูู ุงููุณุชุฎุฏู.

---

### **ููุงุท ุชุญุณูู ุฅุถุงููุฉ:**
1. **ุฏุนู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ:** ุงูุณูุงุญ ูููุณุชุฎุฏู ุจุฅุถุงูุฉ ุนุฏุฉ ุทูุจุงุช ูู ูุงุฆูุฉ ุงูุชุธุงุฑ.
2. **ุชูุงูู ูุน ุฎุฏูุงุช ุณุญุงุจูุฉ:** ุชุฎุฒูู ุงููููุงุช ุนูู Google Drive ุฃู Dropbox.
3. **ูุงุฌูุฉ ููุจ:** ุฅุถุงูุฉ ูุงุฌูุฉ ููุจ ูุชุณููู ุงูุงุณุชุฎุฏุงู.

---

### **ุงูุฎูุงุตุฉ:**
ูุฐุง ุงูุชุญุฏูุซ ูุถูู ุชูุงุนููุง ุฃูุจุฑ ุจูู ุงูุจูุช ูุงููุณุชุฎุฏูุ ูุน ุชูุฏูู ูุงุฆูุฉ ุฎูุงุฑุงุช ูุงุถุญุฉ ูุณููุฉ ุงูุงุณุชุฎุฏุงู. ุงูุจูุช ุงูุขู ูุงุฏุฑ ุนูู ุงูุชุนุงูู ูุน ุงูุทูุจุงุช ุจุดูู ุฃูุซุฑ ุฐูุงุกู ูุงุณุชุฌุงุจุฉู ูููุณุชุฎุฏููู. ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู ุฃู ุชุนุฏููุงุช ุฅุถุงููุฉ ุฃู ุชูุถูุญุงุชุ ููุง ุชุชุฑุฏุฏ ูู ุทูุจ ุฐูู! ๐