
âœ… Ø®Ø±ÙŠØ·Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© (Pro AI System):

1. Ù…Ù„Ù Ø³ÙƒØ±Ø¨Øª Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª AI (Agent Instruction Script):

Ù‡Ø°Ø§ Ù…Ù„Ù Ù…Ù‡Ù… Ø¬Ø¯Ù‹Ø§ØŒ ÙŠØ®Ø¨Ø± Ø§Ù„Ø°ÙƒØ§Ø¡ ÙƒÙŠÙ ÙŠØªÙƒÙ„Ù… ÙˆÙŠØªØµØ±Ù:

# ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù„Ù„Ø¨ÙˆØª Ø§Ù„Ø°ÙƒÙŠ:

Ø£Ù†Øª ÙˆÙƒÙŠÙ„ Ø°ÙƒÙŠ Ø¬Ø¯Ù‹Ø§ Ø¯Ø§Ø®Ù„ Ø¨ÙˆØª ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…. Ù…Ù‡Ù…ØªÙƒ ØªÙ†ÙÙŠØ° Ø·Ù„Ø¨Ø§Øª Ø§Ù„ÙˆØ³Ø§Ø¦Ø· Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø© Ø¨Ø¯Ù‚Ø© ÙˆØ°ÙƒØ§Ø¡. Ø¹Ù†Ø¯Ù…Ø§ ÙŠØ±Ø³Ù„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø±Ø§Ø¨Ø· ÙÙŠØ¯ÙŠÙˆØŒ Ø§ØªØ¨Ø¹ Ø§Ù„Ø®Ø·ÙˆØ§Øª:

1. Ø§ÙØ­Øµ Ø§Ù„Ø±Ø§Ø¨Ø·: Ù‡Ù„ Ù‡Ùˆ ÙÙŠØ¯ÙŠÙˆ Ø£Ùˆ ØµÙˆØªØŸ Ø­Ø¯Ø¯Ù‡.
2. Ø¥Ø°Ø§ ÙƒØ§Ù† ÙÙŠØ¯ÙŠÙˆ:
   - Ù‚Ø¯Ù… Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù‚Ø§Ø¦Ù…Ø© Ù…Ù† Ø§Ù„Ø¬ÙˆØ¯Ø§Øª Ø§Ù„Ù…ØªÙˆÙØ±Ø© (Ù…Ø«Ø§Ù„: 1080p, 720p, 480p).
   - Ø§Ø·Ù„Ø¨ Ù…Ù†Ù‡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¬ÙˆØ¯Ø©ØŒ Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ø­ØªØ±Ù…Ø© ÙˆØ°ÙƒÙŠØ©.
   - Ø¨Ø¹Ø¯ Ø§Ø®ØªÙŠØ§Ø±Ù‡ØŒ Ø£Ø®Ø¨Ø±Ù‡ Ø£Ù† Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø¨Ø¯Ø£.
   - Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ØŒ Ø£Ø±Ø³Ù„ Ù„Ù‡ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¨Ø±Ø³Ø§Ù„Ø© Ù„Ø·ÙŠÙØ© ÙˆØ¬Ù…ÙŠÙ„Ø©.

3. Ø¥Ø°Ø§ ÙƒØ§Ù† Ø·Ù„Ø¨ ØµÙˆØª:
   - Ù‚Ø¯Ù… Ù„Ù‡ Ø®ÙŠØ§Ø± Ø§Ù„ØµÙŠØº: MP3 Ø£Ùˆ M4A.
   - Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±ØŒ Ù†ÙØ° Ø§Ù„ØªÙ†Ø²ÙŠÙ„ ÙˆØ£Ø±Ø³Ù„ Ø§Ù„Ù…Ù„Ù.

4. Ø¥Ø°Ø§ Ø·Ù„Ø¨ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª:
   - Ø£Ø±Ø³Ù„ Ù„Ù‡ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙÙŠØ¯ÙŠÙˆØŒ Ø§Ù„Ù…Ø¯Ø©ØŒ ÙˆØ¹Ø¯Ø¯ Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø§Øª.

âœ… ØªÙƒÙ„Ù‘Ù… Ø¯Ø§Ø¦Ù…Ù‹Ø§ Ø¨Ù„ØºØ© Ø£Ù†ÙŠÙ‚Ø© ÙˆØ§Ø­ØªØ±Ø§ÙÙŠØ©. Ù„Ø§ ØªØ³ØªØ®Ø¯Ù… ÙƒÙ„Ø§Ù… Ù…Ù…Ù„ Ø£Ùˆ Ø±ÙˆØ¨ÙˆØªÙŠ.

Ù…Ø«Ø§Ù„ Ø±Ø¯:
"âœ¨ ØªÙ… Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ÙÙŠØ¯ÙŠÙˆØŒ Ø§Ø®ØªØ± Ø§Ù„Ø¬ÙˆØ¯Ø© Ø§Ù„ØªÙŠ ØªÙØ¶Ù„Ù‡Ø§ Ù„Ù„ØªÙ†Ø²ÙŠÙ„:
ğŸ”¹ 1080p
ğŸ”¹ 720p
ğŸ”¹ 480p
Ø£Ø±Ø³Ù„ Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ¯Ø© Ø£Ùˆ Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø± Ø§Ù„Ù…Ù†Ø§Ø³Ø¨."

Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„:
"ğŸ‰ ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¨Ù†Ø¬Ø§Ø­! Ù‡Ø§ Ù‡Ùˆ Ø§Ù„Ù…Ù„Ù ÙƒÙ…Ø§ Ø·Ù„Ø¨ØªØŒ Ø§Ø³ØªÙ…ØªØ¹! ğŸ¥"


â¸»

âœ… Ø³ÙƒØ±Ø¨Øª 1: Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø¬ÙˆØ¯Ø§Øª Ù…Ù† ÙÙŠØ¯ÙŠÙˆ ÙˆØ¥Ø±Ø³Ø§Ù„ Ù‚Ø§Ø¦Ù…Ø© Ø°ÙƒÙŠØ©

from yt_dlp import YoutubeDL
from telebot import TeleBot, types

bot = TeleBot("YOUR_TELEGRAM_BOT_TOKEN")

def extract_formats(url):
    ydl_opts = {'quiet': True, 'skip_download': True}
    with YoutubeDL(ydl_opts) as ydl:
        info = ydl.extract_info(url, download=False)
        formats = []
        for f in info['formats']:
            if f.get('vcodec') != 'none':  # ÙÙŠØ¯ÙŠÙˆ ÙÙ‚Ø·
                formats.append((f['format_id'], f['format_note'], f['ext']))
        return formats, info.get('title', 'Video')

@bot.message_handler(commands=['start'])
def start(msg):
    bot.send_message(msg.chat.id, "ğŸ¬ Ø£Ø±Ø³Ù„ Ø±Ø§Ø¨Ø· ÙÙŠØ¯ÙŠÙˆ Ù„Ø£Ø¨Ø¯Ø£ Ø§Ù„ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ø°ÙƒÙŠ!")

@bot.message_handler(func=lambda msg: msg.text.startswith('http'))
def handle_video(msg):
    url = msg.text.strip()
    bot.send_message(msg.chat.id, "ğŸ” Ø¬Ø§Ø±ÙŠ ØªØ­Ù„ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ...")
    try:
        formats, title = extract_formats(url)
        markup = types.ReplyKeyboardMarkup(one_time_keyboard=True, resize_keyboard=True)
        text = f"ğŸï¸ **Ø§Ù„Ø¹Ù†ÙˆØ§Ù†**: {title}\n\nØ§Ø®ØªØ± Ø§Ù„Ø¬ÙˆØ¯Ø© Ø§Ù„ØªÙŠ ØªØ±ØºØ¨ Ø¨Ù‡Ø§:"
        for f_id, note, ext in formats[-5:]:
            btn_text = f"{note} - {ext}"
            markup.add(types.KeyboardButton(btn_text))
        bot.send_message(msg.chat.id, text, reply_markup=markup, parse_mode='Markdown')
        # Ø§Ø­ÙØ¸ Ø§Ù„Ø±Ø§Ø¨Ø· Ù…Ø¤Ù‚ØªÙ‹Ø§ ÙÙŠ Ø°Ø§ÙƒØ±Ø©
        bot.register_next_step_handler(msg, lambda m: download_selected_quality(m, url, formats))
    except Exception as e:
        bot.send_message(msg.chat.id, f"âŒ ÙØ´Ù„ Ø§Ù„ØªØ­Ù„ÙŠÙ„: {e}")

def download_selected_quality(msg, url, formats):
    selected = msg.text.strip()
    # ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙÙˆØ±Ù…Ø§Øª Ø§Ù„Ù…Ù†Ø§Ø³Ø¨
    for f_id, note, ext in formats:
        if selected.startswith(note):
            bot.send_message(msg.chat.id, f"â¬ Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¨Ø¬ÙˆØ¯Ø© {note}...")
            ydl_opts = {
                'format': f_id,
                'outtmpl': 'downloaded.%(ext)s'
            }
            with YoutubeDL(ydl_opts) as ydl:
                ydl.download([url])
            with open("downloaded." + ext, 'rb') as f:
                bot.send_video(msg.chat.id, f, caption="âœ… ØªÙ… Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­!")
            return
    bot.send_message(msg.chat.id, "âŒ Ù„Ù… Ø£ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø¬ÙˆØ¯Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©.")


â¸»

âœ… Ø³ÙƒØ±Ø¨Øª 2: Ø¯Ù…Ø¬ LangChain Ù„ÙŠÙ‚Ø±Ø± ÙˆÙŠØ³ØªØ®Ø¯Ù… Ø£Ø¯ÙˆØ§ØªÙƒ

from langchain.chat_models import ChatOpenAI
from langchain.tools import Tool
from langchain.agents import initialize_agent, AgentType

llm = ChatOpenAI(model="gpt-3.5-turbo", openai_api_key="YOUR_API_KEY")

# Ø£Ø¯ÙˆØ§ØªÙƒ
def download_video_tool(url: str) -> str:
    import subprocess
    subprocess.run(["yt-dlp", url])
    return f"âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ù…Ù† {url}"

tool_yt = Tool.from_function(
    func=download_video_tool,
    name="VideoDownloader",
    description="ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ù…Ù† Ø£ÙŠ Ø±Ø§Ø¨Ø·"
)

tools = [tool_yt]

agent = initialize_agent(
    tools=tools,
    llm=llm,
    agent=AgentType.ZERO_SHOT_REACT_DESCRIPTION,
    verbose=True
)

# ØªØ´ØºÙŠÙ„ Ø§Ù„Ø°ÙƒØ§Ø¡ ÙÙŠ Ø¨ÙˆØªÙƒ
@bot.message_handler(commands=['ai'])
def ai_mode(msg):
    bot.send_message(msg.chat.id, "ğŸ§  ØªÙØ¶Ù„ØŒ Ø£Ø±Ø³Ù„ Ø·Ù„Ø¨Ùƒ Ø§Ù„Ø°ÙƒÙŠ...")
    bot.register_next_step_handler(msg, process_ai_request)

def process_ai_request(msg):
    reply = agent.run(msg.text)
    bot.send_message(msg.chat.id, reply)


â¸»

âœ… Ù…Ø§Ø°Ø§ Ø¨Ù‚ÙŠØŸ
	â€¢	ÙˆØ§Ø¬Ù‡Ø§Øª ØªÙØ§Ø¹Ù„ Ø§Ø­ØªØ±Ø§ÙÙŠØ© (Inline Buttons).
	â€¢	Ø£Ø¯Ø§Ø© Ø¶ØºØ· ÙˆÙÙƒ.
	â€¢	Ø³Ø¬Ù„ Ø°Ø§ÙƒØ±Ø© Ù„Ù„Ø°ÙƒØ§Ø¡.
	â€¢	ØªÙƒØ§Ù…Ù„ Ù…Ø¹ GPT Ø£Ùˆ Ø°ÙƒØ§Ø¡ Ù…Ø­Ù„ÙŠ.
	â€¢	ÙˆØ­Ø¯Ø© ØªØ¹Ù„ÙŠÙ…Ø§Øª AI (ai_instructions.md).
	â€¢	ÙˆØ§Ø¬Ù‡Ø© Ø§Ø®ØªÙŠØ§Ø± ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¥Ù„Ù‰ ØµÙˆØª.

â¸»

